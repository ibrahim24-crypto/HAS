<script>
    const sheetDBUrl = "https://sheetdb.io/api/v1/YOUR_SHEET_ID";

    // Fonction pour envoyer les données vers SheetDB
    async function sendData(total, visitors, revisitors) {
        const data = { Total: total, visitors: visitors, revisitors: revisitors };
        await fetch(sheetDBUrl, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({ data }),
        });
    }

    // Comptage des visiteurs
    let totalVisitors = parseInt(localStorage.getItem("totalVisitors")) || 0;
    let revisitors = parseInt(localStorage.getItem("revisitors")) || 0;

    // Vérifie si c'est un revisiteur
    if (localStorage.getItem("isReturningVisitor")) {
        revisitors++;
    } else {
        localStorage.setItem("isReturningVisitor", "true");
    }

    // Incrémente le total
    totalVisitors++;
    localStorage.setItem("totalVisitors", totalVisitors);
    localStorage.setItem("revisitors", revisitors);

    // Envoi des données à SheetDB
    sendData(totalVisitors, totalVisitors - revisitors, revisitors);
</script>
